"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.list = list;

var _fmt = require("../fmt");

var _fmt2 = _interopRequireDefault(_fmt);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
  List tasks in a fly instance.
  @param {Object} fly instance
  @param {{ bare:Boolean }} unstyled
 */
function list(host, _ref) {
  var bare = _ref.bare;

  if (!bare) console.log("\n" + _fmt2.default.dim.bold("Available tasks"));
  each(host instanceof Function ? Object.assign(host, { default: host }) : host, function (task, desc) {
    return console.log("" + (bare ? "%s" : "  " + _fmt2.default.title + "\t" + desc), task);
  });
  if (!bare) console.log();
}
/**
  Run handler for each task and description field in host.
 */
function each(host, handler) {
  Object.keys(host).forEach(function (task) {
    var desc = /^\s*\/\*\*\s*@desc\s+(.*)\s*\*\//gm.exec("" + host[task]);
    handler(task, desc ? desc.pop() : "");
  });
}